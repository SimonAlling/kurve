<!DOCTYPE html>

<html lang="en">

<head>

    <title>Achtung, die Kurve!</title>

</head>

<body>

    <div id="elm-node"></div>

    <script src="./build/ZATACKA.js"></script>
    <script>
        const app = Elm.Main.init({ node: document.getElementById("elm-node") });

        function drawSquare(canvas, { position: { leftEdge, topEdge }, thickness, color }) {
            const context = canvas.getContext("2d");
            context.fillStyle = color;
            context.fillRect(leftEdge, topEdge, thickness, thickness);
        }

        function clearRectangleIfCanvasExists(canvas, { x, y, width, height }) {
            const context = canvas?.getContext("2d");
            context?.clearRect(x, y, width, height);
        }

        app.ports.render.subscribe(squares => {
            const canvas_main = document.getElementById("canvas_main");
            for (const square of squares) {
                drawSquare(canvas_main, square);
            }
        });

        app.ports.clear.subscribe(rectangle => {
            const canvas_main = document.getElementById("canvas_main");
            clearRectangleIfCanvasExists(canvas_main, rectangle);
        });
    </script>

</body>

</html>
